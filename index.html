<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="stylesheet.css" type="text/css"><!Add Styling to make drop zone more visible>
</head>
<body>

  <! EasyFileReader External Script>
  <script src = "EasyFileReader.js"></script>

  <! EasyListener External Script>
  <script src="EasyListener.js"></script>

  <! Basic HTML for Project>
  <input type="file" id="fileButton" name="fileButton"  multiple />
  <div id="drop_zone">Drop files here</div>
  <div id="output"></div>

  <! Local Script>
  <script>

  // List of Allowable File Types (Optional)
  const supportedFileTypes = [ // Add or remove fileReader supported file types as needed; if this is set to null then any file type can be potentially used
    'text/plain',
    'application/json',
    'text/csv',
    'application/vnd.ms-excel',
    '' // This is for '.md' files
  ]; 

  // Declare the Customizable callback function
  const myCallback = (loadedData) => {
    // Remember that the results come back as an array of Objects with Content/Errors AND Metadata
    
    //console.log(loadedData); // Un-Comment to see the returned Data in it's raw form 

    // Lets output the Loaded Data to the Output Area
    loadedData = loadedData
          .filter( fileObj => {
              if(fileObj.error){ // some basic error handling
                console.log(fileObj.error);
                return false;
              } else {
                return true;
              }
          } )
          .map( // change from objects to strings
              fileObj => 
              `<p><strong><em>${fileObj.metadata.name}:</em></strong></br>${fileObj.contents}</p>`  // using template literals to get some metadata and the contents
            )
          .join(' '); // this prevents the output results from having commas between them (since they are coming from an array)
        
 
      document.getElementById('output').innerHTML = loadedData;
  }

  // Instantiate and Use Syntactic Sugar for a File Drop
  new EasyListener("drop_zone", myCallback).fileDropListener();

  // Instantiate and Use Syntactic Sugar for a File Input Button
  new EasyListener("fileButton", myCallback).fileButtonListener();

  </script>
</body>
</html>